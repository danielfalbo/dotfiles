- defaults:
    link:
      create: true
      relink: true
      force: true

- shell:
    - command: test -d ~/.oh-my-zsh || sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
      description: Installing ohmyzsh

    - command: which brew || bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      description: Installing homebrew
      stdout: true
      stdin: true

    - command: /opt/homebrew/bin/brew bundle
      description: Installing brew packages
      stdout: true

    - command: defaults write com.microsoft.VSCode ApplePressAndHoldEnabled -bool false
      description: Enabling key-repeating in VSCode

- clean: ["~"]

- link:
    ~/.config/karabiner/karabiner.json: karabiner.json
    ~/.gitconfig: .gitconfig
    ~/.gitignore: .global.gitignore
    ~/.tmux.conf: .tmux.conf
    ~/.vimrc: .vimrc
    ~/.zshrc: .zshrc
    ~/Library/Application Support/Code/User/settings.json: settings.json

- create:
    - ~/Developer

- shell:
    - command: open -a Rectangle
      description: Activating Rectangle

    - command: open -a Karabiner-Elements
      description: Activating Karabiner

    - command: open -a DeepL
      description: Activating DeepL

    - command: open -a Shottr
      description: Activating Shottr

    - command: defaults write com.googlecode.iterm2.plist PrefsCustomFolder -string "~/.dotfiles"
      description: Setting iTerm preferences directory

    - command: defaults write com.googlecode.iterm2.plist LoadPrefsFromCustomFolder -bool true
      description: Telling iTerm2 to use the custom preferences in the directory
